<MDProgressBar>
	size_hint: 1, .005
	pos_hint: {'top': 1}#, 'left': 1}

<MDCarousel>
	size_hint: 1, .995

<ScreenLayout@MDBoxLayout>
	size_hint: 1, 1
	pos_hint: {'center': (.5, .5)}
	orientation: "vertical"
	padding: 20
	spacing: 10

<TopLabel@MDLabel>
	size_hint: 1, .2
	halign: "center"
	bold: False
	font_style: "H5"

<IconButton@MDIconButton>
	size_hint: 1, .3
	pos_hint: {'center': (.5, .5)}
	halign: "center"
	icon_size: "128sp"
	theme_icon_color: "Custom"

<MDScrollView>
	size_hint: 1,.7

<TwoColumns@MDGridLayout>
	size_hint: 1,.4
	pos_hint: {'center': (.5, .5)}
	cols: 2
	spacing: [10,20]

<DropdownLabel@MDLabel>
	size_hint: None, 1
	width: "256sp"
	pos_hint: {'center': (.5, .5)}

<IconListItem>
    IconLeftWidget:
		pos_hint: {'center_x': .5, 'center_y': .5}
        icon: root.icon

<Dropdown@MDDropDownItem>
	size_hint: 1, 1
	pos_hint: {'center_x': .5, 'center_y': .1}

<Textfield@MDTextField>

<MDFillRoundFlatIconButton>
	size_hint:1,.1
	pos_hint: {'center': (.5, .5)}
	md_bg_color: app.theme_cls.primary_color

<MDTopAppBar>
	size_hint:1,.1

<MDNavigationLayout>
	size_hint:1,.9

<ContentNavigationDrawer>
	MDList:
		size_hint: 1,1
		OneLineListItem:
			id: menuFeedback
			text: app.content("menuFeedback")
			on_press:
				root.nav_drawer.set_state("close")
				root.screen_manager.current = "feedbackScreen"
		OneLineListItem:
			id: menuEvaluate
			text: app.content("menuEvaluate")
			on_press:
				root.nav_drawer.set_state("close")
				root.screen_manager.current = "evaluateScreen"

MDScreen:
	MDTopAppBar:
		elevation: 0
		pos_hint: {"top": 1}
		left_action_items:
			[['menu', lambda x: nav_drawer.set_state("open")]]
		right_action_items:
			[['arrow-up-drop-circle-outline', lambda x: carousel.load_previous()],['arrow-down-drop-circle-outline', lambda x: carousel.load_next()]]

	MDNavigationLayout:
		MDScreenManager:
			id: screen_manager
			MDScreen:
				name: "feedbackScreen"
				MDProgressBar:
					id: progressBar
					color: app.theme_cls.accent_color
				MDCarousel:
					id: carousel
					direction: 'bottom'
					on_slide_complete: progressBar.value = 100 / (len(self.slides) - 1) * self.slides.index(self.current_slide)
					on_slide_complete: app.save_inputs()
					# general
					ScreenLayout:
						TopLabel:
							id: welcomeLabel
							text: app.content("welcomeLabel")
						IconButton:
							icon: "emoticon-happy-outline"
							icon_color: (0,.5,0,1)
							on_release: app.initialRating = 2
							on_release: carousel.load_next()
						IconButton:
							icon: "emoticon-neutral-outline"
							icon_color: (1,.64,0,1)
							on_release: app.initialRating = 1
							on_release: carousel.load_next()
						IconButton:
							icon: "emoticon-sad-outline"
							icon_color: (1,0,0,1)
							on_release: app.initialRating = 0
							on_release: carousel.load_next()
						Dropdown:
							id: languageSelection
							text: app.selectedLanguage
							on_release: app.languageDropdown["languageSelection"].open()
							on_text: app.translate(self.text)
					# initial gratitude and encouragement to continue
					ScreenLayout:
						TopLabel:
							id: encouragementLabel
							text: app.content("encouragementLabel")
						MDScrollView:
							MDLabel:
								id: encouragementText
								text: app.content("encouragementText")
						MDFillRoundFlatIconButton:
							id: encouragementYes
							icon: "thumb-up-outline"
							text: app.content("encouragementYes")
							on_release: carousel.load_next()
						MDFillRoundFlatIconButton:
							id: encouragementNo
							icon: "exit-to-app"
							text: app.content("encouragementNo")
							on_release: carousel.load_slide(carousel.slides[len(carousel.slides)-1])
					# 4 more specific questions
					ScreenLayout:
						TopLabel:
							id: detailratingLabel
							text: app.content("detailratingLabel")
						TwoColumns:
							DropdownLabel:
								id: detailratingAvailability
								text: app.content("detailratingAvailability")
							Dropdown:
								id: detailratingQone
								text: app.content("detailratingSelect")
								on_release: app.ratingDropdown["detailratingQone"].open()
							DropdownLabel:
								id: detailratingProcessing
								text: app.content("detailratingProcessing")
							Dropdown:
								id: detailratingQtwo
								text: app.content("detailratingSelect")
								on_release: app.ratingDropdown["detailratingQtwo"].open()
							DropdownLabel:
								id: detailratingExpertise
								text: app.content("detailratingExpertise")
							Dropdown:
								id: detailratingQthree
								text: app.content("detailratingSelect")
								on_release: app.ratingDropdown["detailratingQthree"].open()
							DropdownLabel:
								id: detailratingKindness
								text: app.content("detailratingKindness")
							Dropdown:
								id: detailratingQfour
								text: app.content("detailratingSelect")
								on_release: app.ratingDropdown["detailratingQfour"].open()
						TwoColumns:
					# specificially good
					ScreenLayout:
						TopLabel:
							id: commendationLabel
							text: app.content("commendationLabel")
						Textfield:
							id: commendation
							hint_text: app.content("textHint")
							multiline: True
							size_hint: 1, 1
					# specificially bad
					ScreenLayout:
						TopLabel:
							id: suggestionLabel
							text: app.content("suggestionLabel")
						Textfield:
							id: suggestion
							hint_text: app.content("textHint")
							multiline: True
							size_hint: 1, 1
					# received service
					ScreenLayout:
						TopLabel:
							id: serviceLabel
							text: app.content("serviceLabel")
						Textfield:
							id: service
							hint_text: app.content("textHint")
							multiline: True
							size_hint: 1, 1
					# final gratitude
					ScreenLayout:
						TopLabel:
							id: thankyouLabel
							text: app.content("thankyouLabel")
						IconButton:
							icon: "heart"
							icon_color: (.97, .65, .97, 1)
			MDScreen:
				name: "evaluateScreen"
				ScreenLayout:
					MDTextField:
						id: adminPass
						hint_text: app.content("adminPass")
						password: bool(app.database.password)
					MDFillRoundFlatIconButton:
						id: buttonPassword
						icon: "key-variant"
						text: app.content("buttonPassword")
						disabled: bool(app.database.password)
						on_release: adminPass.text = "" if app.database.write("SETTING", {"KEY": "password", "VALUE": adminPass.text}) else adminPass.text
						on_release: app.notif(app.content("resetMessage"))
					MDFillRoundFlatIconButton:
						id: buttonExport
						icon: "database-export-outline"
						text: app.content("buttonExport")
						disabled: adminPass.text != app.database.password or not app.database.password
						on_release: app.report()
						on_release: adminPass.text = ""
					MDFillRoundFlatIconButton:
						id: buttonReset
						icon: "delete-forever-outline"
						text: app.content("buttonReset")
						disabled: adminPass.text != app.database.password or not app.database.password
						on_release: app.cancel_confirm_dialog(app.content("buttonReset"), app.content("cancelReset"), app.content("confirmReset"))
						on_release: adminPass.text = ""
					MDScrollView:
						MDLabel:
							id: devInfo
							text: app.content("devInfo")

        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            ContentNavigationDrawer:
                screen_manager: screen_manager
                nav_drawer: nav_drawer
